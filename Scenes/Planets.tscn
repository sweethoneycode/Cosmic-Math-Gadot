[gd_scene load_steps=9 format=2]

[ext_resource path="res://images/Planets/multiplication.png" type="Texture" id=1]
[ext_resource path="res://Scenes/Planets.gd" type="Script" id=2]
[ext_resource path="res://Scenes/BackBtn.tscn" type="PackedScene" id=3]
[ext_resource path="res://Scenes/MathPlanet.tscn" type="PackedScene" id=4]
[ext_resource path="res://images/Planets/division.png" type="Texture" id=5]
[ext_resource path="res://images/Planets/addition.png" type="Texture" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends Control

var _save: SaveGame

export(String, \"+\", \"-\", \"x\", \"/\") var mathType: = \"+\"
var selectLabel
# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"hipLabel.text = \"0\"
onready var planetLabel := $\"%PlanetLabel\"
onready var shipLabel := $\"%ShipLabel\"
export var planetImg = preload(\"res://images/Planets/subtraction.png\")
export var planetSpeed := 1
var scene = preload(\"res://Scenes/MathStage.tscn\")


# Called when the node enters the scene tree for the first time.
func _ready():
	_save = SaveGame.load_savegame()
	$Sprite.texture = planetImg
	$Sprite.set_speed(planetSpeed)
	mathPlanet()
	

func mathPlanet():
	
	match mathType:
		\"+\":
			if(!_save.AdditionComplete.empty()):
				var levelStat = _save.AdditionComplete.size()
				if(levelStat > 0):
					levelStat -= 1
					shipLabel.text = var2str(levelStat)

		\"-\":
			if(!_save.SubtractionComplete.empty()):
				var levelStat = _save.SubtractionComplete.size()
				if(levelStat > 0):
					levelStat -= 1
					shipLabel.text = var2str(levelStat)

		\"x\":
			if(!_save.MultiComplete.empty()):
				var levelStat = _save.MultiComplete.size()
				if(levelStat > 0):
					levelStat -= 1
					shipLabel.text = var2str(levelStat)
			
		\"/\":
			mathType = \"รท\"
			if(!_save.DivisionComplete.empty()):
				var levelStat = _save.DivisionComplete.size()
				if(levelStat > 1):
					levelStat -= 1
					shipLabel.text = var2str(levelStat)
				shipLabel.text = \"1\"

		_:
			pass

	planetLabel.text = mathType

func _on_TextureButton_pressed():
	PlayerVariables.stage = mathType
	
	get_tree().change_scene(\"res://Scenes/LevelSelect.tscn\")

"

[sub_resource type="StreamTexture" id=2]
flags = 5
load_path = "res://.import/subtraction.png-6f1e3a0443aefe5239fea9cbc55ffe4a.stex"

[node name="Planets" type="Node2D"]
script = ExtResource( 2 )

[node name="space" type="Node2D" parent="."]

[node name="CPUParticles2D" type="CPUParticles2D" parent="space"]
position = Vector2( 982, 585 )
amount = 300
lifetime = 44.96
preprocess = 300.0
speed_scale = 0.1
randomness = 0.5
lifetime_randomness = 0.5
emission_shape = 2
emission_rect_extents = Vector2( 1920, 1080 )
direction = Vector2( 0, 0.5 )
gravity = Vector2( 0, 1 )
scale_amount = 3.0
hue_variation = 0.5
hue_variation_random = 0.5

[node name="Division" parent="." instance=ExtResource( 4 )]
margin_left = 1316.0
margin_top = 623.0
margin_right = 1316.48
margin_bottom = 623.0
mathType = "/"
planetImg = ExtResource( 5 )
planetSpeed = 3

[node name="Multiplication" parent="." instance=ExtResource( 4 )]
margin_left = 263.0
margin_top = 682.0
margin_right = 263.48
margin_bottom = 682.0
rect_scale = Vector2( 0.800001, 0.8 )
mathType = "x"
planetImg = ExtResource( 1 )

[node name="Subtraction" parent="." instance=ExtResource( 4 )]
margin_left = 1363.0
margin_top = 152.0
margin_right = 1363.0
margin_bottom = 152.0
rect_scale = Vector2( 0.600005, 0.64 )
script = SubResource( 1 )
mathType = "-"
planetImg = SubResource( 2 )

[node name="Addition" parent="." instance=ExtResource( 4 )]
anchor_left = 0.118
anchor_top = 0.139
anchor_right = 0.274
anchor_bottom = 0.417
margin_left = 367.0
margin_top = 150.0
margin_right = 367.48
margin_bottom = 150.0
planetImg = ExtResource( 6 )
planetSpeed = 0

[node name="Node2D" parent="." instance=ExtResource( 3 )]
